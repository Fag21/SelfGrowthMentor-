{% extends 'base.html' %}
{% block title %}{{ habit.name }}{% endblock %}
{% block content %}
<div class="max-w-3xl mx-auto mt-8">
  <div class="glass1 p-6 rounded-2xl">
    <div class="flex justify-between items-start">
      <div>
        <h2 class="text-2xl font-semibold">{{ habit.name }}</h2>
        <p class="text-sm opacity-80">{{ habit.get_habit_type_display }} â€¢ Commitment: {{ habit.commitment }}/10</p>
      </div>
      <div class="text-right">
        <p class="text-sm">Started: {{ habit.start_date }}</p>
        <p class="text-sm">Streak: {{ habit.current_streak }} (best {{ habit.best_streak }})</p>
      </div>
    </div>

    <hr class="my-4">

    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <h4 class="font-semibold">Your Reason</h4>
        <p class="text-sm">{{ habit.reason }}</p>

        <h4 class="mt-4 font-semibold">Your Plan</h4>
        <p class="text-sm">{{ habit.plan }}</p>
      </div>

      <div>
        <h4 class="font-semibold">Quick Actions</h4>
        <form method="post" action="{% url 'habits:toggle_completion' habit.pk %}">
          {% csrf_token %}
          <button
  class="px-4 py-2 rounded text-white {% if not habit.completed_today %}bg-green-500 hover:bg-green-600{% else %}bg-gray-400 cursor-not-allowed{% endif %}"
  {% if habit.completed_today %}disabled{% endif %}
>
  {% if not habit.toggle_completion %}
    Mark Today
  {% else %}
    Completed
  {% endif %}
</button>
  
        </form>

        <a href="{% url 'habits:edit' habit.pk %}" class="block mt-2 text-yellow-200 underline">Edit habit</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
